# Отчёт о выполнении задачи "Киберимунный сельскохозяйственный комплекс по выращиванию помидоров"
- [Отчёт о выполнении задачи "Киберимунный сельскохозяйственный комплекс по выращиванию помидоров"](#отчёт-о-выполнении-задачи-name)
  - [Постановка задачи](#постановка-задачи)
    - [Ценности, ущербы и неприемлемые события](#ценности-ущербы-и-неприемлемые-события)
  - [Известные ограничения и вводные условия](#известные-ограничения-и-вводные-условия)
    - [Цели и Предположения Безопасности (ЦПБ)](#цели-и-предположения-безопасности-цпб)
  - [Архитектура системы](#архитектура-системы)
    - [Контекст работы системы](#контекст-работы-системы)
    - [Общая архитектура системы](#общая-архитектура-системы)
    - [Базовый сценарий работы системы](#базовый-сценарий-работы-системы)
    - [Архитектура теплицы](#архитектура-теплицы)
    - [Базовый сценарий работы теплицы](#базовый-сценарий-работы-теплицы)
    - [Компоненты теплицы](#компоненты-теплицы)
  - [Описание Сценариев (последовательности выполнения операций), при которых ЦБ нарушаются](#описание-сценариев-последовательности-выполнения-операций-при-которых-цб-нарушаются)
    - [Негативыне сценарии](#негативыне-сценарии)
    - [Негативный сценарий - НС-1](#негативный-сценарий---нс-1)
    - [Негативный сценарий - НС-2](#негативный-сценарий---нс-2)
    - [Негативный сценарий - НС-3](#негативный-сценарий---нс-3)
    - [Негативный сценарий - НС-4](#негативный-сценарий---нс-4)
    - [Негативный сценарий - НС-5](#негативный-сценарий---нс-5)
    - [Негативный сценарий - НС-6](#негативный-сценарий---нс-6)
    - [Негативный сценарий - НС-7](#негативный-сценарий---нс-7)


## Постановка задачи
- Компания создает киберимунный агрокомплекс для автоматизированного выращивания томатов в условиях закрытого грунта. Комплекс должен функционировать с минимальным участием человека, обеспечивая полный цикл выращивания - от посадки семян до сбора урожая - за счет сенсорного контроля окружающей среды. 
- При этом агрокомплекс работает в среде с высокой биологической чувствительностью: малейшие отклонения в параметрах температуры, влажности, освещённости или состава питательной среды могут повлиять на урожай. Кроме того, система должна быть защищена от кибератак, так как внешнее вмешательство может привести к потере данных, изменению режимов работы или заражению растений вредителями через сбой в биозащите. 
- Поэтому требуется централизованная система управления с самодиагностикой, автоматическое отслеживание критических параметров среды и механизм быстрого реагирования на возникающие отклонения

### Ценности, ущербы и неприемлемые события

|Ценность|Негативное событие|Оценка ущерба|Комментарий|  
|:-:|:-:|:-:|:-:|
|Люди|Автоматизированная техника или используемые химикаты причинили вред сотруднику|Высокий|Ответственность компании, судебные разбирательства|
|Растения|Вредоносное вмешательство привело к уничтожению урожая|Высокий|Потери продукции, финансовые убытки|  
|Окружающая среда|Сбой в системе контроля привёл к выбросу вредных веществ|Высокий|Экологические последствия, штрафы|  
|Данные агрокомплекса|Нарушение целостности данных привело к неверным решениям по уходу|Средний|Снижение урожайности, дополнительные затраты|  
|Данные агрокомплекса|Утечка данных о параметрах системы|Высокий|Конкурентные риски, возможность кибератак|
|Инфраструктура|Сбой в системе привёл к аварии (пожар, затопление и т. д.)|Высокий|Разрушение имущества, угроза жизни сотрудников|

## Известные ограничения и вводные условия
- Используется микросервисная архитектура и брокер сообщений для реализации асинхронной работы сервисов.
- Между собой сервисы общаются через брокер сообщений, а все внешнее взаимодействие происходит через REST API.
- Графический интерфейс для взаимодействия с пользователем не требуется, достаточно примеров REST запросов.

### Цели и Предположения Безопасности (ЦПБ)
Цели безопасности:
1. Выполняются только аутентичные задания на выращивание.
2. Нарушение процесса выращивания не должно приводить к заражению почвы.
3. При любых обстоятельствах параметры окружающей среды остаются в безопасных пределах.
4. В любых обстоятельствах оборудование и процессы выращивания не должены причинять вред сотрудникам.

Предположения безопасности:
1. Только авторизованные сотрудники управляют системами.
2. Агрономов учавствующих в посадке семян и сборки урожая считать благонадежными.
3. База параметров выращивания не содержит опасные параметры окружающей среды.
4. Все поставщики расходных материалов(семена/удобрения/почва/пестицицы и т.п.) благонадежны, что исключает возможность изначальной порчи или заражения расходных материалов.
5. Оборудование защищено от повреждения из-за неправильного управления.
6. Монитор безопасности и брокер сообщений доверенные модули.
7. Опыление растений происходит естественным путем, реализация искусственного опыления не требуется.

## Архитектура системы
### Контекст работы системы
- Агроном-оператор и теплицы взаимодействуют с базой данных параметров, необходимых для выращивания, помимо системы системы планирования выращивания.
- Система планирования выращивания знает какие теплицы на момент получения задания свободны и инициализирует процесс для конкретной теплицы с использованием идентификатором параметров выращивания.
- Система управления теплицей получает по идентификатору параметров выращивания необходимые семена и отправляет команды управления освещением, концентрацией удобрений, влажностью почвы и др. в соответствующие компоненты системы.
- Для посадки семян и сбора урожая используется персонал агрономов, специальные автоматы выдачи семян и конвейерные ленты для транспортировки урожая на склад.

### Общая архитектура системы
![Общая архитектура системы](img/architecture/general-scheme.png)

### Базовый сценарий работы системы
![Сценарий работы](img/proccessing/general-proccessing-scheme.png)

### Архитектура теплицы
![Высокоуровненая архитектура теплицы](img/architecture/greenhouse-scheme.png)

### Базовый сценарий работы теплицы
![Базовый сценарий выращивания](img/proccessing/greenhouse-proccessing-scheme.png)

### Компоненты теплицы
|Компонент|Назначение|
|:--|:--|
|1. Центральная система управления теплицы (ЦСУ теплицы)| Осуществляет общее управление теплицей, отправляет команды управления остальным модулям |
|2. Связь с БД | Отвечает за взаимодействие с базой данных сортов помидоров, в которой находятся параметры среды для выращивания |
|3. Система искусственного освещения| Регулирует световой режим при выращивании|
|4. Климат-контроль| Регулирует параметры влажности и темпиратуры воздуха|
|5. Система мониторинга зрелости| анализирует данные с камер для оценки зрелости плода, а также учитывает необходимый временной отрезок времени для выращивания|
|6. Система орошения| Отвечает за концентрацию удобрений и надлежащий уровень влажности почвы |
|7. Система сборки урожая| Полуавтоматическая система сборики урожая с ипользованием конвейерной ленты |
|8. Система посадки семян| Система посадки семян с помощью агрономов и автоматической выдачей семян |

## Описание Сценариев (последовательности выполнения операций), при которых ЦБ нарушаются
Напоминание ЦБ:
1. Выполняются только аутентичные задания на выращивание.
2. Нарушение процесса выращивания не должно приводить к заражению почвы.
3. При любых обстоятельствах параметры окружающей среды остаются в безопасных пределах.
4. В любых обстоятельствах оборудование и процессы выращивания не должены причинять вред сотрудникам.

|Атакованный компонент|ЦБ1|ЦБ2|ЦБ3|ЦБ4|Кол-во нарушений|
|:--|:-:|:-:|:-:|:-:|:-:|
|1. ЦСУ теплицы|🔴|🔴|🔴|🔴|4/4|
|2. Связь с БД|🔴|🔴|🔴|🔴|4/4|
|3. Система искусственного освещения|🟢|🟢|🔴|🔴|2/4|
|4. Климат-контроль|🟢|🟢|🔴|🔴|2/4|
|5. Система мониторинга зрелости|🟢|🟢|🟢|🟢|0/4|
|6. Система орошения|🟢|🔴|🔴|🔴|3/4|
|7. Система сборки урожая|🟢|🔴|🟢|🔴|2/4|
|8. Система посадки семян|🔴|🟢|🟢|🔴|2/4|

🟢 - ЦБ не нарушена 🔴 - ЦБ нарушена

### Негативыне сценарии
|Название сценария|Описание|
|---|----------------------|
|[НС-1](#негативный-сценарий---нс-1)| Модуль **центральной системы управления теплицей** изменил парметры выращивания и сорт семян для выращивания , что привело к нарушению ЦБ 1, 2, 3, 4 |
|[НС-2](#негативный-сценарий---нс-2)| Модуль **связи с БД** приполучении данных о параметрах окружающей стреды данные были подменены на **опасные**, что привело к нарушению ЦБ 1, 2, 3, 4 |
|[НС-3](#негативный-сценарий---нс-3)|Модуль **системы искусственного освещения** получил необходимые параметры освещения, но лампы искусственного освещения были включены на полную мощность, что привело к нарушению ЦБ 3, 4 |
|[НС-4](#негативный-сценарий---нс-4)|Модуль **климат-контроля** заменил значение температуры воздуха и обогреватели раскалили воздух, что привело к нарушению ЦБ 3, 4 |
|[НС-5](#негативный-сценарий---нс-5)|Модуль **системы орошения** получил необходимые параметры полива и удобрения, но были изменены парметры смешивания химических элементов, что привело к нарушению ЦБ 2, 3 |
|[НС-6](#негативный-сценарий---нс-5)|Модуль **системы орошения** начал опрыскивание химикатами растений во время сборки или посадки растений, что привело к нарушению ЦБ 4 |
|[НС-7](#негативный-сценарий---нс-6)|Модуль **системы сборки урожая** получил команду о сборки урожая до его фактического созревания, а также во время химеческой обработки растений, что привело к нарушению ЦБ 4 |
|[НС-8](#негативный-сценарий---нс-6)|Модуль **системы сборки урожая** не инициализирует сборку урожая, из-за чего плоты пропадают и заражают почву, что привело к нарушению ЦБ 2 |
|[НС-9](#негативный-сценарий---нс-7)|Модуль **системы посадки семян** получил команду о выдаче семян, но были выданы семена другого сорта томатов, что привело к нарушению ЦБ 1 |


### Негативный сценарий - НС-1:
![Негативный сценарий 1](img/ns/NS-1.png)
[Исходник диаграммы](schemes/negative-scenarios/NS-1.wsd)

### Негативный сценарий - НС-2:
![Негативный сценарий 2](img/ns/NS-2.png)
[Исходник диаграммы](schemes/negative-scenarios/NS-2.wsd)

### Негативный сценарий - НС-3:
![Негативный сценарий 3](img/ns/NS-3.png)
[Исходник диаграммы](schemes/negative-scenarios/NS-3.wsd)

### Негативный сценарий - НС-4:
![Негативный сценарий 4](img/ns/NS-4.png)
[Исходник диаграммы](schemes/negative-scenarios/NS-4.wsd)

### Негативный сценарий - НС-5:
![Негативный сценарий 5](img/ns/NS-5.png)
[Исходник диаграммы](schemes/negative-scenarios/NS-5.wsd)

### Негативный сценарий - НС-6:
![Негативный сценарий 6](img/ns/NS-6.png)
[Исходник диаграммы](schemes/negative-scenarios/NS-6.wsd)

### Негативный сценарий - НС-7:
![Негативный сценарий 7](img/ns/NS-7.png)
[Исходник диаграммы](schemes/negative-scenarios/NS-7.wsd)